---
title: ìë°”ì˜ stream ê°„ë‹¨ ì •ë¦¬
date: 2024-04-08 17:44:00 +09:00
categories: [java]
tags:
  [
    java,
    stream
  ]
---

## ğŸ¤” ìŠ¤íŠ¸ë¦¼(stream) ì´ë€?

- ìë°” 8ë¶€í„° ì¶”ê°€ëœ ê¸°ìˆ ë¡œ ë°ì´í„°ì˜ ì¶”ìƒí™”ëœ ì—°ì†ì ì¸ íë¦„ì„ ë‹¤ë£¨ëŠ” APIë‹¤.
- ëŒë‹¤ë¥¼ í™œìš©í•´ ë°°ì—´ê³¼ ì»¬ë ‰ì…˜ì„ í•¨ìˆ˜í˜•ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ìŠ¤íŠ¸ë¦¼ì€ ë°ì´í„° ì†ŒìŠ¤(íƒ€ì…)ë¥¼ ì¶”ìƒí™”í•˜ê³ , ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ”ë° ìì£¼ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í•´ ë†“ì•„ì„œ ë°ì´í„° ì†ŒìŠ¤ì— ìƒê´€ì—†ì´ ëª¨ë‘ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆì–´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ì§„ë‹¤.

<br>

#### [ê¸°ì¡´ì˜ forë¬¸ê³¼ Iterator ë¹„êµ]
- ê¸°ì¡´ì˜ `forë¬¸`ê³¼ `Iterator` ë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œê°€ ê¸¸ì–´ì ¸ì„œ ê°€ë…ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§€ê³  ë°ì´í„° íƒ€ì…ë§ˆë‹¤ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë‹¤ë¤„ì•¼í•œë‹¤.
- ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œê°€ ë” ê°„ê²°í•˜ê³  ëª…ì‹œì ì¸ ë°˜ë³µì„ ì œê±°í•  ìˆ˜ ìˆë‹¤.

- for ë¬¸ ì˜ˆì‹œ
    ```java
    List<String> names = Arrays.asList("John", "Jane", "Michael", "Sarah", "James");
    List<String> filteredNames = new ArrayList<>();
    for (String name : names) {
        if (name.startsWith("J")) {
            filteredNames.add(name);
        }
    }
    System.out.println(filteredNames);  // John, Jane
    ```

- stream ì‚¬ìš©
    ```java
    List<String> names = Arrays.asList("John", "Jane", "Michael", "Sarah", "James");
    List<String> filteredNames = names.stream()
        .filter(name -> name.startsWith("J"))
        .collect(Collectors.toList());
    System.out.println(filteredNames);  // John, Jane
    ```

<br>

## ğŸ¥¸ ìŠ¤íŠ¸ë¦¼ì˜ íŠ¹ì§•
- ì›ë³¸ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì½ê¸°ë§Œ ìˆ˜í–‰í•˜ì—¬ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•œë‹¤.
- í•œë²ˆ ì‚¬ìš©í•˜ë©´ ë‹«í˜€ì„œ ì¬ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•œ ì¼íšŒìš©ì´ë‹¤.
- ìµœì¢… ì—°ì‚° ì „ê¹Œì§€ ì¤‘ê°„ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ë¶ˆí•„ìš”í•œ ê³„ì‚°ì„ ìµœì†Œí™”í•œë‹¤.
- ì‘ì—…ì„ ë‚´ë¶€ ë°˜ë³µìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.
    - ë°˜ë³µì„ ëª…ì‹œì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ì§€ ì•ŠìŒìœ¼ë¡œì¨ ê°„ê²°í•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.
- ë³‘ë ¬ ì²˜ë¦¬ê°€ ì‰½ë‹¤.
    - ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì„ ì§€ì›í•œë‹¤.
- ê¸°ë³¸í˜• ìŠ¤íŠ¸ë¦¼ì„ ì œê³µí•œë‹¤.
    - `Stream<Integer>` ëŒ€ì‹  `IntStream`ì´ ì œê³µë¨ìœ¼ë¡œì¨ `int <-> Integer` ì˜ ì˜¤í† ë°•ì‹±ê³¼ ì–¸ë°•ì‹± ë“±ì˜ ë¶ˆí•„ìš”í•œ ê³¼ì •ì´ ìƒëµë˜ê³  **ì„±ëŠ¥ í–¥ìƒ**ìœ¼ë¡œ ì´ì–´ì§„ë‹¤.
        > ê·¸ëŸ¬ë‚˜ `Stream<Integer>` ì„ ì“°ë©´ ì˜¤í† ë°•ì‹±ê³¼ ì–¸ë°•ì‹±ì´ ìˆ˜í–‰ëœë‹¤.
    - ìˆ«ìì˜ ê²½ìš° ìœ ìš©í•œ ë©”ì„œë“œë¥¼ ì¶”ê°€ë¡œ ì œê³µí•œë‹¤. (`sum()`, `average()` ë“±)

<br>

## ğŸ˜„ ìŠ¤íŠ¸ë¦¼ ìƒì„±
- ê¸°ì¡´ì˜ ë°°ì—´ì´ë‚˜ ìŠ¤íŠ¸ë¦¼ì— `.stream()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•  ìˆ˜ë„ ìˆê³  ì§ì ‘ streamì„ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

<br>

#### [ë°°ì—´ ìŠ¤íŠ¸ë¦¼]
- `Arrays.stream();` ì•ˆì— ì¸ìë¡œ ë„£ì–´ì¤˜ì•¼ í•œë‹¤.

```java
String[] arr = new String[]{"a", "b", "c"};
Stream<String> stream = Arrays.stream(arr);
```

<br>

#### [ì»¬ë ‰ì…˜ ìŠ¤íŠ¸ë¦¼]
- `.stream()` ë©”ì„œë“œë¡œ ë°”ë¡œ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.

```java
List<String> list = Arrays.asList("a", "b", "c");
Stream<String> stream = list.stream();
```

<br>

#### [builderë¡œ ìƒì„±]
- `Stream.builder()` ë¡œ ìƒì„± í›„ `add`ë¡œ ìš”ì†Œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

```java
Stream<String> builderStream = Stream.<String>builder()
    .add("a").add("b").add("c")
    .build();
```

<br>

#### [ëŒë‹¤ì‹ìœ¼ë¡œ ìƒì„±]
- `generate()` ë˜ëŠ” `iterate()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒë‹¤ì‹ì„ ì´ìš©í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤.
- ìƒì„±í•  ë•Œ ìŠ¤íŠ¸ë¦¼ì˜ í¬ê¸°ê°€ ì •í•´ì ¸ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ìµœëŒ€ í¬ê¸°ë¥¼ `limit()` ë¡œ ì œí•œí•´ì•¼ í•œë‹¤.

```java
Stream<String> generatedStream = Stream.generate(()->"a").limit(3); // a, a, a

Stream<Integer> iteratedStream = Stream.iterate(0, n->n+2).limit(5); // 0, 2, 4, 6, 8
```

<br>

#### [ê¸°ë³¸ íƒ€ì…í˜• ìŠ¤íŠ¸ë¦¼]
- íƒ€ì…ì´ ì§€ì •ëœ ìŠ¤íŠ¸ë¦¼ì´ë‹¤.

```java
IntStream intStream = IntStream.range(1, 5); // 1, 2, 3, 4
```

<br>

#### [ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼]
- `parallelStream` ìœ¼ë¡œ ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
    - [ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼(ParallelStream) ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ê¸°](https://ajroot5685.github.io/posts/parallel-stream/)

```java
Stream<String> parallelStream = list.parallelStream();
```

<br>

## ğŸ˜¤ ì¤‘ê°„ ì—°ì‚°(ê°€ê³µ)

#### [Filtering]
- ìŠ¤íŠ¸ë¦¼ ë‚´ ìš”ì†Œë“¤ì„ í•˜ë‚˜ì”© í‰ê°€í•´ì„œ ê±¸ëŸ¬ë‚´ëŠ” ì‘ì—…ì„ í•œë‹¤.
- ëŒë‹¤ì‹ì˜ ë°˜í™˜ê°’ì´ `true`ì¸ ê²½ìš°ë§Œ ë‹¤ìŒ ì—°ì‚°ì„ ì§„í–‰í•œë‹¤.

```java
List<String> list = Arrays.asList("a","b","c");
Stream<String> stream = list.stream()
	.filter(list -> list.contains("a"));
    // 'a'ê°€ ë“¤ì–´ê°„ ìš”ì†Œë§Œ ì„ íƒ
    // a
```

<br>

#### [Mapping]
- ìŠ¤íŠ¸ë¦¼ ë‚´ ìš”ì†Œë“¤ì„ í•˜ë‚˜ì”© íŠ¹ì • ê°’ìœ¼ë¡œ ë³€í™˜í•œë‹¤.

```java
List<String> list = Arrays.asList("a","b","c");
Stream<String> stream = list.stream()
	.map(String::toUpperCase);
    // ëŒ€ë¬¸ìë¡œ ë³€ê²½
    // A, B, C
```

<br>

#### [Sorting]
- ìŠ¤íŠ¸ë¦¼ ë‚´ ìš”ì†Œë“¤ì„ ì •ë ¬í•˜ëŠ” ì‘ì—…
- Comparatorë¥¼ ì‚¬ìš©í•œë‹¤.

```java
List<String> list = Arrays.asList("a","b","c");
Stream<String> stream = list.stream()
	.sorted(Comparator.reverseOrder());
    // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
    // c, b, a
```

<br>

#### [ê¸°íƒ€ ì—°ì‚°]
```java
Stream<String> stream = list.stream()
	.distinct() // ì¤‘ë³µ ì œê±°
    .limit(max) // ìµœëŒ€ í¬ê¸° ì œí•œ
    .skip(n)    // ì•ì—ì„œë¶€í„° nê°œ skipí•˜ê¸°
    .peek(System.out::println) // ì¤‘ê°„ ì‘ì—…ê²°ê³¼ í™•ì¸
```

## ìµœì¢… ì—°ì‚°

#### [Calculating]
- ê¸°ë³¸í˜• íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìŠ¤íŠ¸ë¦¼ ë‚´ ìš”ì†Œë“¤ë¡œ ìµœì†Œ, ìµœëŒ€, í•©, í‰ê·  ë“±ì„ êµ¬í•˜ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

```java
IntStream stream = list.stream()
	.count()   //ìŠ¤íŠ¸ë¦¼ ìš”ì†Œ ê°œìˆ˜ ë°˜í™˜
    .sum()     //ìŠ¤íŠ¸ë¦¼ ìš”ì†Œì˜ í•© ë°˜í™˜
    .min()     //ìŠ¤íŠ¸ë¦¼ì˜ ìµœì†Œê°’ ë°˜í™˜
    .max()     //ìŠ¤íŠ¸ë¦¼ì˜ ìµœëŒ€ê°’ ë°˜í™˜
    .average() //ìŠ¤íŠ¸ë¦¼ì˜ í‰ê· ê°’ ë°˜í™˜
```

<br>

#### [Reduction]
- ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ì¤„ì—¬ê°€ë©° ëˆ„ì ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤.

```java
IntStream stream = IntStream.range(1,5);

int result = stream.reduce(10, (total,num)->total+num);
//reduce(ì´ˆê¸°ê°’, (ëˆ„ì  ë³€ìˆ˜,ìš”ì†Œ)->ìˆ˜í–‰ë¬¸)
// 10 + 1 + 2 + 3 + 4 = 20

System.out.println(result); // 20
```

<br>

#### [Collecting]
- ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë“¤ì„ ì›í•˜ëŠ” í˜•íƒœë¡œ ë³€í™˜í•˜ê³  ìˆ˜ì§‘í•œë‹¤.

```java
Stream<String> stream = Stream.of("Apple", "Banana", "Cherry", "Avocado");

// toList() - ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜
List<String> list = stream.collect(Collectors.toList());

// toSet() - ì„¸íŠ¸ë¡œ ë°˜í™˜
Set<String> set = stream.collect(Collectors.toSet());

// joining() - í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ê²°í•©
String result = stream.collect(Collectors.joining(", "));
System.out.println(result); // Apple, Banana, Cherry, Avocado

// groupingBy() - ì¡°ê±´ì— ë§ê²Œ ê·¸ë£¹ì§€ì–´ì„œ Mapìœ¼ë¡œ ë°˜í™˜
Map<Character, List<String>> map = stream
            .collect(Collectors.groupingBy(s -> s.charAt(0)));
System.out.println(map);
// {A=[Apple, Avocado], B=[Banana], C=[Cherry]}

// collectingAndThen() - collecting ì´í›„ ì¶”ê°€ ì‘ì—… ìˆ˜í–‰
List<String> unmodifiableList = stream
    .collect(Collectors.collectingAndThen(
        Collectors.toList(),
        Collections::unmodifiableList));    // collecting í›„ ê°’ì„ ë³€ê²½í•˜ì§€ ëª»í•˜ë„ë¡ ì„¤ì •
System.out.println(unmodifiableList);
        
try {
    unmodifiableList.add("New Fruit");  // ìˆ˜ì •ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ ì˜ˆì™¸ ë°œìƒ
} catch (UnsupportedOperationException e) {
    System.out.println("Cannot modify the list");
}
```

<br>

#### [Matching]
- íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ìš”ì†Œê°€ ìˆëŠ”ì§€ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.
    - anyMatch : í•˜ë‚˜ë¼ë„ ë§Œì¡±í•˜ëŠ” ìš”ì†Œê°€ ìˆìœ¼ë©´ true
    - allMatch : ëª¨ë‘ ë§Œì¡±í•˜ë©´ true
    - noneMatch : ëª¨ë‘ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ true

```java
List<String> members = Arrays.asList("Lee", "Park", "Hwang");

boolean matchResult = members.stream()
						.anyMatch(members->members.contains("w")); //wë¥¼ í¬í•¨í•˜ëŠ” ìš”ì†Œê°€ ìˆëŠ”ì§€, True

boolean matchResult = members.stream()
						.allMatch(members->members.length() >= 4); //ëª¨ë“  ìš”ì†Œì˜ ê¸¸ì´ê°€ 4 ì´ìƒì¸ì§€, False

boolean matchResult = members.stream()
						.noneMatch(members->members.endsWith("t")); //të¡œ ëë‚˜ëŠ” ìš”ì†Œê°€ í•˜ë‚˜ë„ ì—†ëŠ”ì§€, True
```

<br>

#### [Iterating]
- forEachë¡œ ìŠ¤íŠ¸ë¦¼ì„ ëŒë©´ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…ì´ë‹¤.

```java
List<String> fruits = Arrays.asList("Apple", "Banana", "Cherry", "Avocado");
Stream<String> fruitStream = fruits.stream();

fruitStream.forEach(System.out::println);
// Apple
// Banana
// Cherry
// Avocado
```

<br>

#### [Finding]
- ìŠ¤íŠ¸ë¦¼ì—ì„œ íŠ¹ì • ìš”ì†Œë¥¼ ì°¾ëŠ” ì‘ì—…ì´ë‹¤.

```java
List<String> fruits = Arrays.asList("Apple", "Banana", "Cherry", "Avocado");

// findFirst() - ì²«ë²ˆì§¸ ìš”ì†Œ ë°˜í™˜
Optional<String> firstFruit = fruits.stream()
            .findFirst();
        
firstFruit.ifPresent(System.out::println); // Apple

// findAny() - ì œì¼ ë¨¼ì € ì°¾ì€ ìš”ì†Œ ë°˜í™˜, ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì˜ ê²½ìš° ì²«ë²ˆì§¸ ìš”ì†Œ ë°˜í™˜ì´ ë³´ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤.
Optional<String> anyFruit = fruits.stream()
            .findAny();
        
anyFruit.ifPresent(System.out::println); // ì„ì˜ì˜ ê³¼ì¼ ì¶œë ¥ (ëŒ€ë¶€ë¶„ "Apple")
```

<br>

> ì¶œì²˜
> 
> [[Java] ìŠ¤íŠ¸ë¦¼(Stream) ì •ë¦¬](https://velog.io/@yun8565/Java-%EC%8A%A4%ED%8A%B8%EB%A6%BCStream-%EC%A0%95%EB%A6%AC)

<br>

## ëˆ„êµ°ê°€ê°€ ë¬¼ì–´ë³¸ë‹¤ë©´
<div class="spotlight1">
ìŠ¤íŠ¸ë¦¼ì€ ë°ì´í„°ì˜ ì¶”ìƒí™”ëœ ì—°ì†ì ì¸ íë¦„ì„ ë‹¤ë£¨ëŠ” API ì…ë‹ˆë‹¤.
<br><br>
ë°ì´í„° ì»¬ë ‰ì…˜ì„ í•¨ìˆ˜í˜• ìŠ¤íƒ€ì¼ë¡œ ì—°ì†ì ì´ê³  ì„ ì–¸ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ ì¦ê°€í•©ë‹ˆë‹¤.
</div>